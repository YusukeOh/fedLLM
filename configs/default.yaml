# ─── fedLLM default configuration ───
# FRED-MD is the sole numerical data source.

data:
  root_path: ./data/raw
  features: M           # multivariate → multivariate
  target: INDPRO        # primary target: Industrial Production Index
  freq: m               # monthly
  scale: true

  # DEC-003: 29 core variables selected via multi-criteria review
  # (Fed communications, macro forecasting lit, nowcasting lit, NBER indicators)
  # See discussions/002_fred_md_variable_selection.md for full rationale.
  core_variables:
    real_economy:        # 実体経済・生産 (5)
      - INDPRO              # Industrial Production Index
      - DPCERA3M086SBEA     # Real Personal Consumption Expenditures
      - CUMFNS              # Capacity Utilization: Manufacturing
      - W875RX1             # Real Personal Income ex Transfers
      - CMRMTSPLx           # Real Mfg & Trade Industries Sales
    labor:               # 労働市場 (6)
      - PAYEMS              # Total Nonfarm Payrolls
      - UNRATE              # Unemployment Rate
      - CES0600000008       # Avg Hourly Earnings: Goods-Producing
      - CLAIMSx             # Initial Unemployment Claims
      - CLF16OV             # Civilian Labor Force
      - AWHMAN              # Avg Weekly Hours: Manufacturing
    prices:              # 物価 (6)
      - CPIAUCSL            # CPI All Items
      - CPIULFSL            # CPI Less Food & Energy
      - PCEPI               # PCE Price Index
      - OILPRICEx           # Crude Oil Prices (WTI)
      - DSERRG3M086SBEA     # PCE Services Price Index
      - WPSFD49207          # PPI: Finished Goods
    housing:             # 住宅 (2)
      - HOUST               # Housing Starts
      - PERMIT              # Building Permits
    investment:          # 設備投資・在庫 (2)
      - ANDENOx             # New Orders: Nondefense Cap Goods ex Aircraft
      - ISRATIOx            # Total Business: Inventories/Sales Ratio
    financial:           # 金融環境 (4)
      - FEDFUNDS            # Federal Funds Rate
      - GS10                # 10-Year Treasury Rate
      - BAA                 # Moody's Baa Corporate Bond Yield
      - S&P 500             # S&P 500 Index
    exchange:            # 為替 (1)
      - TWEXAFEGSMTHx       # Trade-Weighted USD Index
    money_credit:        # マネー・信用 (2)
      - M2SL                # M2 Money Stock
      - BUSLOANS            # Commercial & Industrial Loans
    sentiment:           # センチメント (1)
      - UMCSENTx            # U. Michigan Consumer Sentiment

  # Fallback mapping for series with early data gaps
  fallback_variables:
    ANDENOx: AMDMNOx     # Durable Goods New Orders (broader)

# DEC-005: Preprocessing pipeline (discussions/003_preprocessing_pipeline.md)
preprocessing:
  start_date: "1978-02"            # all 29 core vars structurally complete
  end_date: auto                   # no truncation; trailing NaN → [UNPUB]
  pre_transform_imputation:
    method: linear
    scope: internal_only           # trailing NaN preserved for [UNPUB]
  tcode: fred_md_official
  tcode_override: {}               # ablation: e.g. {HOUST: 5, PERMIT: 5}
  outlier:
    method: winsorize
    threshold: 10                  # × IQR from median
  normalization: standard_scaler   # fit on training set; RevIN applied in model
  unpub_token:
    enabled: true
    training_simulation:
      enabled: true
      probability: 0.3
    publication_lags:
      tier_0:  # same-month or near-real-time
        - FEDFUNDS
        - GS10
        - BAA
        - "S&P 500"
        - INDPRO
        - CUMFNS
        - PAYEMS
        - UNRATE
        - CES0600000008
        - CLAIMSx
        - CLF16OV
        - AWHMAN
        - CPIAUCSL
        - CPIULFSL
        - OILPRICEx
        - WPSFD49207
        - TWEXAFEGSMTHx
        - M2SL
        - BUSLOANS
        - UMCSENTx
      tier_1:  # ~1 month lag
        - DPCERA3M086SBEA
        - W875RX1
        - PCEPI
        - DSERRG3M086SBEA
        - ANDENOx
      tier_2:  # ~2 month lag
        - CMRMTSPLx
        - HOUST
        - PERMIT
        - ISRATIOx

model:
  name: FedTimeLLM
  llm_model: GPT2       # GPT2 for quick experiments; LLAMA for final runs
  llm_layers: 6
  llm_dim: 768           # GPT2: 768, LLaMA-7B: 4096

  seq_len: 36            # 3 years lookback
  label_len: 12          # 1 year label
  pred_len: 12           # 1 year ahead forecast
  patch_len: 6           # 6-month patches
  stride: 3              # 3-month stride → overlapping patches

  d_model: 16
  d_ff: 32
  n_heads: 8
  num_tokens: 1000
  dropout: 0.1

training:
  seed: 42
  epochs: 50
  batch_size: 32
  learning_rate: 0.001
  patience: 10           # early stopping patience
  lr_scheduler: cosine   # cosine | onecycle
  use_amp: true

evaluation:
  pred_horizons:
    - 1
    - 3
    - 6
    - 12
  target_variables:
    - INDPRO
    - CPIAUCSL
    - UNRATE
    - PAYEMS
    - PCEPI
    - FEDFUNDS

fomc:
  statements_dir: ./data/raw/fomc/statements
  minutes_dir: ./data/raw/fomc/minutes
  vocabulary_dir: ./data/vocabulary
  start_year: 1994       # FOMC statements publicly released from 1994
  min_year_minutes: 1993 # minutes available slightly earlier
